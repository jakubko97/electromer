<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button autoHide></ion-menu-button>
    </ion-buttons>
    <ion-title>Dashboard</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>

  <ion-card>
    <ion-card-header>
      <ion-card-subtitle><div *ngIf="user != undefined">
        Welcome, {{ user.name }}
      </div></ion-card-subtitle>
      <ion-card-title>
        Select custom date
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label>Electromer </ion-label>
              <ion-select [(ngModel)]="electromer" [compareWith]="compareFn">
                <ion-select-option [value]="e" *ngFor="let e of electromers">{{e.name}}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label>From </ion-label>
              <ion-datetime pickerFormat="D/M/YYYY" [(ngModel)]="from_date"></ion-datetime>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label>To </ion-label>
              <ion-datetime pickerFormat="D/M/YYYY" [(ngModel)]="to_date"></ion-datetime>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-fab>
              <ion-fab-button (click)="getData()">
                <ion-icon large *ngIf="!apiResult.loading" name="checkmark-outline"></ion-icon>
                <ion-spinner *ngIf="apiResult.loading"></ion-spinner>
              </ion-fab-button>
            </ion-fab>


          </ion-col>
        </ion-row>
        <ion-row *ngIf="apiResult.error">
          <ion-col>
            <ion-label color="danger">{{apiResult.error}} </ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
    <ion-card-header>
      <ion-card-title>
        Quick select
      </ion-card-title>
      <ion-card-subtitle>
        in recent days
      </ion-card-subtitle>
    </ion-card-header>

      <!-- Label only -->
      <ion-segment value="favorite" (ionChange)="quickSelect($event)">
        <ion-segment-button value="last_day">
          <ion-label>last day</ion-label>
        </ion-segment-button>
        <ion-segment-button value="last_three">
          <ion-label>last 3 days</ion-label>
        </ion-segment-button>
        <ion-segment-button value="last_seven">
          <ion-label>last 7 days</ion-label>
        </ion-segment-button>
        <ion-segment-button value="last_ten">
          <ion-label>last 10 days</ion-label>
        </ion-segment-button>
      </ion-segment>
  </ion-card>
  <div class="chart elevation">
    <div *ngIf="graphLoading">
      <ion-progress-bar type="indeterminate">
      </ion-progress-bar>
      <ion-label class="info-render text-center">
        Rendering graph...
      </ion-label>
    </div>

    <div id="chartContainer" style="height: 500px; width: 100%; margin-left:auto;margin-right:auto;"></div>
  </div>
</ion-content>